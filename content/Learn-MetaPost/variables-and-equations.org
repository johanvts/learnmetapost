---
title: "Variables and Equations"
date: 2021-04-04T21:15:26+02:00
draft: false
---
* Variables

MetaPost uses 10 different types of variables. Here we will have a look at the tree most used

1. Numeric
2. Pair
3. Path 

These three make up the building blocks of most MetaPost figures.

** Numeric

A numeric is simply a floating point number. We can declare and initalize a numeric like so 

#+BEGIN_SRC
numeric a;
a:=4.0;
#+END_SRC

For numerics we can actually skip the declaration as MetaPost will automatically create a numeric when we assign a value to it. 

** Pair

A pair is simply a touple containig two numerics. Pairs are hugely usefull as they describe positions in the 2d coordinate system
that is out main reference for locating things in metapost. Lets declared two points A and B like so:

#+BEGIN_SRC
pair A,B;
#+END_SRC

once decalred we can initialize A and B. 

#+BEGIN_SRC
A := (1,1);
B := (2,2);
#+END_SRC

** Path

Finally, a path can be defined by a combination of pairs, and instructions for connecting those pairs.
A basic connection instruction is the "--" operator, which says to connect pairs using straight lines. Given pairs A, and B we
can define a straight line l by writing

#+BEGIN_SRC
path l;
l := A--B;
#+END_SRC

MetaPost can draw paths using the draw command:

#+BEGIN_SRC
draw l;
#+END_SRC

* Collection of variables

Sometimes we want to declare a collection of variables. We can do that by writing =[]= after a variable declaration.

#+BEGIN_SRC
pair A[];
#+END_SRC

A is now an array of pairs, we can address the individual pairs by suffixing =A= with a number:

#+BEGIN_SRC
pair A[];
A0 := (1,1);
A1 := (2,2);
#+END_SRC

By default MetaPost declares variables =x= and =y= as arrays of numerics and =z= as an array of pairs.
And it maintains the relationship =z(suffix)=(x(suffix),y(suffix))=.
We can use this to skip declarations if we only need a single collection of points in our figure, for example in this figure:

{{< figure src="/images/usingz.png" title="Using point to draw a line." >}}

#+BEGIN_SRC
beginfig(1)
  x1 = y1 = 10;
  x2 = y2 = 20;
  draw (0,y1)--z1--z2--(30,y2);
endfig
end
#+END_SRC

* Equations

MetaPost differs from many other languages in that it does not use === to assign values to variables, for that we use the assignment operator =:==
The equality operator  === is used, just as it is in mathematics, to declare that the right and left hand sides are equal.
Whenever we write === we are specifying equations, and MetaPost will try to resolve them.
Recall that =z1= is shorthand for =(x1,y1)= and try to run this file:

#+BEGIN_SRC
z1 = (1,1);
x1 = 2;
#+END_SRC

You will get an =Inconsistent equation= error, since MetaPost cannot resolve 1=2.

{{< figure src="/images/Inconsistent.PNG" title="1 does not equal 2." >}}

Now try this file instead:
#+BEGIN_SRC
z1 = (1,1);
x1 = a*2;
show a;
end
#+END_SRC

Here the equation has a solution and MetaPost correctly solves the equation to find the value of the numeric =a=.
We can use =show= to make MetaPost print the value in its output.

{{< figure src="/images/Consistent.PNG" title="Using show to expect the value of a." >}}

** Drawing a triangle

The build-in equation solver is hugely powerfull for drawing figures of mathematical concepts without having to assign absolute positions.
Lets draw a right triangle in this way. 
The triangle consists of three points =A,B,C=, connected by straight lines, and at the point =C= I want a right angle.
In MetaPost this decsription translates into:

#+BEGIN_SRC
pair A,B,C;
B = C + (0,1);
A = C - (1,0);
#+END_SRC

To acutally draw the triangle we just need to anchor =C= somewhere on our coordinate system.

#+BEGIN_SRC
C:=origin;
#+END_SRC

And we can draw the triangle with *draw*

> draw A--B--C--cycle;

here I used the special cycle to point back to the beginning of the path.

Metapost can handle much more complicated linear equations, also involving pairs.
Lets draw a simple X.

> z1=-z2=(1,1);
> z3=-z4=(-1,1);
> draw z1--z2, z3--z4;

Recall that z is a reserved varialbe for storing paris. You will notice how we used equality with the fact that "-" mirrors values around 0.

Next we will use the special syntax "fraction[pair1,pair2]" to find the place where the two lines cross.
This syntax yields the pair at "fraction" of the way along a straight line from pair1 to pair2.
In this simple case we know that the paths intersect at 1/2[z1,z3], but we can use the equation solver to find
the answer (1/2) as well. Since we don't really need to store that fraction, but just the coordinats of the point,
we will use the special keyword "whatever" to denote an anonumus variable. That was a lot of information, but I think
you will find it quite intuitive to use:

We write

> z5 = whatever[z1,z2];
 
which simply says that z5 is equal to some point on the line between z1 and z2.
If we add the equation:

> z5 = whatever[z3,z4];

there is suddenly only one solution, we can draw it out using the command 'dotlabel', which is like 'label' that we used in the hello world example, but with a dot marking the location
of the label.

> dotlabel("z5 solution",z5);

If we want to find intersections between more complicated not-straight paths we can use the "(path) intersectionpoint (path)" command.

* Exercise

Use what you have seen to draw the following figure:

You can use |lft|rt|top|bot|ulft|urt|llft|lrt to control the relative location of a label like so:

dotlabel.rt("rt",origin);

> thirds_box.mp


